# Лабораторная работа 6 - маршруты API Яндекс.Расписаний

Консольная утилита запрашивает через API Яндекс.Расписаний все маршруты между заданными городами на заданную дату и выводит только прямые маршруты и маршруты с одной пересадкой. Ответ сервиса кэшируется в JSON‑файлах каталога `cache/` и переиспользуется, если ему меньше трёх часов.

## Подготовка

Перед запуском нужен ключ API Яндекс.Расписаний в файле `yandex_key.json` в корне репозитория:

```json
{
  "yandex_api_key": "ВАШ_КЛЮЧ_API"
}
```

## Сборка

```bash
cd labwork6-maksimbelov1

cmake -S . -B build
cmake --build build
```

## Пример запуска

По умолчанию начальный и конечный город указаны Санкт‑Петербург и Псков

Маршруты из Санкт‑Петербурга в Псков на 1 января 2026 года:

```bash
./build/labwork6-maksimbelov1 2026-01-01 1
```


## Пример вывода

```text
Маршрут без пересадок:
Санкт-Петербург (Ладожский вокзал) - Псков
Отправление: 2025-03-15T08:20:00+03:00
Прибытие:    2025-03-15T12:45:00+03:00
Тип транспорта: train
Маршрут: Санкт-Петербург — Псков
Номер: 825А

-------------------------------------------

Маршрут с 1 пересадкой:
Санкт-Петербург (Ладожский вокзал) - Великий Новгород
Отправление: 2025-03-15T07:00:00+03:00
Прибытие к месту пересадки: 2025-03-15T09:30:00+03:00
Тип транспорта: train
Маршрут: Санкт-Петербург — Великий Новгород
Номер: 701А
------ Время пересадки: 1800 сек ------
Великий Новгород - Псков
Отправление из места пересадки: 2025-03-15T10:00:00+03:00
Прибытие: 2025-03-15T12:15:00+03:00
Тип транспорта: bus
Маршрут: Великий Новгород — Псков
Номер: 112
```


## ТЗ

Спроектировать и реализовать консольное приложение для нахождения маршрутов из Санкт-Петербурга до Вашего родного города, используя Yandex Api и внешние библиотеки.


## Требования

Консольное приложение должно искать список возможных маршрутов из Санкт-Петербурга до вашего родного города (в случае если вы из Санкт-Петербурга, то до Пскова) и обратно с не более чем 1 пересадкой любыми видами транспорта (например самолет + поезд) на определенную дату (передается аргументом командной строки). Кэшировать найденые промежуточные результаты в памяти и на файловой системе для уменьшения количества запросов на внешний сервис.

## Источник данных

В качестве источника информации должно быть использовано [API Яндекса Расписаний](https://yandex.ru/dev/rasp/doc/ru/). 
Для разработчиков оно ограничено 500 запросами в день. Стоит внимательно изучить API, подумать какая информация является неизменной, что можно сохранить локально и переиспользовать.

## Реализация 

Работа с API предполагает выполнение [HTTP-запросов](https://en.wikipedia.org/wiki/HTTP). Для этого необходимо воспользоваться библиотекой [С++ Requests](https://github.com/libcpr/cpr). В качестве библиотеки для работы с json-ответом - [nlohmann/json](https://github.com/nlohmann/json).


В данной работе, при взаимодействии с внешним сервисами, может возникать достаточно большое количество коллизий и краевых случаев. Внимательно, подумайте об этом! Ваша программа должна корректно работать и "не падать".


## NB

Работа с внешними библиотеками является основной частью данной работы. Рекомендуется внимательно ознакомиться с документацией, тестами и исходным кодом вышеуказанных библиотек.
